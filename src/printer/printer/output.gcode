; generated by Slic3r 1.3.0 on 2025-07-29 at 09:29:12

; Printer Config Notes: 
; Don't remove the following keywords! These keywords are used in the "compatible printer" condition of the print and filament profiles to link the particular print and filament profiles to this printer profile.
; PRINTER_MODEL_MK4IS
; PG
; 
; external perimeters extrusion width = 0.45mm (13.84mm^3/s)
; perimeters extrusion width = 0.45mm (13.84mm^3/s)
; infill extrusion width = 0.45mm (16.28mm^3/s)
; solid infill extrusion width = 0.45mm (16.28mm^3/s)
; top infill extrusion width = 0.42mm (7.54mm^3/s)
; support material extrusion width = 0.36mm (7.61mm^3/s)

M107
M17 ; enable steppers
M862.1 P0.4 ; nozzle diameter check
M862.3 P "MK4" ; printer model check
M862.5 P2 ; g-code level check
M862.6 P"Input shaper" ; FW feature check
M115 U5.1.2+13478

G90 ; use absolute coordinates
M83 ; extruder relative mode

M140 S60 ; set bed temp
M104 T0 S170 ; set extruder temp for bed leveling
M109 T0 R170 ; wait for temp

M84 E ; turn off E motor

G28 ; home all without mesh bed level

G1 X42 Y-4 Z5 F4800

M302 S160 ; lower cold extrusion limit to 160C

G1 E-2 F2400 ; retraction

M84 E ; turn off E motor

G29 P9 X10 Y-4 W32 H4

M106 S100

G0 Z40 F10000

M190 S60 ; wait for bed temp

M107

;
; MBL
;
M84 E ; turn off E motor
G29 P1 ; invalidate mbl & probe print area
G29 P1 X0 Y0 W50 H20 C ; probe near purge place
G29 P3.2 ; interpolate mbl probes
G29 P3.13 ; extrapolate mbl outside probe area
G29 A ; activate mbl

; prepare for purge
M104 S230
G0 X0 Y-4 Z15 F4800 ; move away and ready for the purge
M109 S230

G92 E0
M569 S0 E ; set spreadcycle mode for extruder

;
; Extrude purge line
;
G92 E0 ; reset extruder position
G1 E2 F2400 ; deretraction after the initial one before nozzle cleaning
G0 E7 X15 Z0.2 F500 ; purge
G0 X25 E4 F500 ; purge
G0 X35 E4 F650 ; purge
G0 X45 E4 F800 ; purge
G0 X48 Z0.05 F8000 ; wipe, move close to the bed
G0 X51 Z0.2 F8000 ; wipe, move quickly away from the bed

G92 E0
M221 S100 ; set flow to 100%
M900 K0.05{elsif nozzle_diameter[0]==0.25}0.14{elsif nozzle_diameter[0]==0.3}0.07{elsif nozzle_diameter[0]==0.35}0.06{elsif nozzle_diameter[0]==0.6}0.03{elsif nozzle_diameter[0]==0.5}0.035{elsif nozzle_diameter[0]==0.8}0.015{else}0{endif} ; Filament gcode


M572 S0.036{elsif nozzle_diameter[0]==0.5}0.025{elsif nozzle_diameter[0]==0.6}0.02{elsif nozzle_diameter[0]==0.8}0.014{elsif nozzle_diameter[0]==0.25}0.12{elsif nozzle_diameter[0]==0.3}0.08{else}0{endif} ; Filament gcode
{endif}

M142 S36 ; set heatbreak target temp
G21 ; set units to millimeters
G90 ; use absolute coordinates
M83 ; use relative distances for extrusion
printer_config_files/before_layer.gcode
G1 E-0.70000 F2100.00000
G1 Z0.200 F18000.000
;AFTER_LAYER_CHANGE
;0.2
printer_config_files/before_layer.gcode
G1 Z0.400 F18000.000
;AFTER_LAYER_CHANGE
;0.2
M106 S255
M104 S220 ; set temperature
printer_config_files/before_layer.gcode
;AFTER_LAYER_CHANGE
;0.4
printer_config_files/before_layer.gcode
G1 Z0.600 F18000.000
;AFTER_LAYER_CHANGE
;0.6
G1 Z0.800 F18000.000
M107
; Filament-specific end gcode
G1 Z{z_offset+min(layer_z+1, max_print_height)} F720 ; Move print head up{endif}
M104 S0 ; turn off temperature
M140 S0 ; turn off heatbed
M107 ; turn off fan
G1 X241 Y170 F3600 ; park
G1 Z{z_offset+min(layer_z+23, max_print_height)} F300 ; Move print head up{endif}
G4 ; wait
M572 S0 ; reset PA
M593 X T2 F0 ; disable IS
M593 Y T2 F0 ; disable IS
M84 X Y E ; disable motors
; max_layer_z = [max_layer_z]
; filament used = 0.0mm (0.0cm3)
; total filament cost = 0.0

; avoid_crossing_perimeters = 0
; bed_shape = 0x0,250x0,250x210,0x210
; bed_temperature = 60
; before_layer_gcode = printer_config_files/before_layer.gcode
; between_objects_gcode = 
; bridge_acceleration = 1500
; bridge_fan_speed = 100
; brim_connections_width = 0
; brim_width = 0
; complete_objects = 0
; cooling = 1
; default_acceleration = 4000
; disable_fan_first_layers = 1
; duplicate_distance = 6
; end_filament_gcode = "; Filament-specific end gcode"
; end_gcode = {if layer_z < max_print_height}G1 Z{z_offset+min(layer_z+1, max_print_height)} F720 ; Move print head up{endif}\nM104 S0 ; turn off temperature\nM140 S0 ; turn off heatbed\nM107 ; turn off fan\nG1 X241 Y170 F3600 ; park\n{if layer_z < max_print_height}G1 Z{z_offset+min(layer_z+23, max_print_height)} F300 ; Move print head up{endif}\nG4 ; wait\nM572 S0 ; reset PA\nM593 X T2 F0 ; disable IS\nM593 Y T2 F0 ; disable IS\nM84 X Y E ; disable motors\n; max_layer_z = [max_layer_z]
; extruder_clearance_height = 14
; extruder_clearance_radius = 45
; extruder_offset = 0x0
; extrusion_axis = E
; extrusion_multiplier = 1
; fan_always_on = 1
; fan_below_layer_time = 100
; filament_colour = #FF8000
; filament_cost = 25.4
; filament_density = 1.24
; filament_diameter = 1.75
; filament_max_volumetric_speed = 15
; filament_notes = ""
; first_layer_acceleration = 500
; first_layer_bed_temperature = 60
; first_layer_extrusion_width = 0.5
; first_layer_speed = 40
; first_layer_temperature = 230
; gcode_arcs = 0
; gcode_comments = 0
; gcode_flavor = reprap
; has_heatbed = 1
; infill_acceleration = 4000
; infill_first = 0
; interior_brim_width = 0
; layer_gcode = ;AFTER_LAYER_CHANGE\n;[layer_z]
; max_fan_speed = 100
; max_layer_height = 0.3
; max_print_speed = 200
; max_volumetric_speed = 0
; min_fan_speed = 100
; min_layer_height = 0.07
; min_print_speed = 15
; min_skirt_length = 4
; notes = 
; nozzle_diameter = 0.4
; only_retract_when_crossing_perimeters = 0
; ooze_prevention = 0
; output_filename_format = {input_filename_base}_0.4n_{layer_height}mm_{printing_filament_types}_{printer_model}_{print_time}.gcode
; perimeter_acceleration = 4000
; post_process = 
; pressure_advance = 0
; printer_notes = Don't remove the following keywords! These keywords are used in the "compatible printer" condition of the print and filament profiles to link the particular print and filament profiles to this printer profile.\nPRINTER_MODEL_MK4IS\nPG
; resolution = 0
; retract_before_travel = 1.5
; retract_layer_change = 1
; retract_length = 0.7
; retract_length_toolchange = 4
; retract_lift = 0.2
; retract_lift_above = 0
; retract_lift_below = 219
; retract_restart_extra = 0
; retract_restart_extra_toolchange = 0
; retract_speed = 35
; skirt_distance = 6
; skirt_height = 1
; skirts = 0
; slowdown_below_layer_time = 8
; spiral_vase = 0
; standby_temperature_delta = -5
; start_filament_gcode = "M900 K{if nozzle_diameter[0]==0.4}0.05{elsif nozzle_diameter[0]==0.25}0.14{elsif nozzle_diameter[0]==0.3}0.07{elsif nozzle_diameter[0]==0.35}0.06{elsif nozzle_diameter[0]==0.6}0.03{elsif nozzle_diameter[0]==0.5}0.035{elsif nozzle_diameter[0]==0.8}0.015{else}0{endif} ; Filament gcode\n\n{if printer_notes=~/.*(MK4IS|XLIS).*/}\nM572 S{if nozzle_diameter[0]==0.4}0.036{elsif nozzle_diameter[0]==0.5}0.025{elsif nozzle_diameter[0]==0.6}0.02{elsif nozzle_diameter[0]==0.8}0.014{elsif nozzle_diameter[0]==0.25}0.12{elsif nozzle_diameter[0]==0.3}0.08{else}0{endif} ; Filament gcode\n{endif}\n\nM142 S36 ; set heatbreak target temp"
; start_gcode = M17 ; enable steppers\nM862.1 P[nozzle_diameter] ; nozzle diameter check\nM862.3 P "MK4" ; printer model check\nM862.5 P2 ; g-code level check\nM862.6 P"Input shaper" ; FW feature check\nM115 U5.1.2+13478\n\nG90 ; use absolute coordinates\nM83 ; extruder relative mode\n\nM140 S[first_layer_bed_temperature] ; set bed temp\nM104 T0 S170 ; set extruder temp for bed leveling\nM109 T0 R170 ; wait for temp\n\nM84 E ; turn off E motor\n\nG28 ; home all without mesh bed level\n\nG1 X42 Y-4 Z5 F4800\n\nM302 S160 ; lower cold extrusion limit to 160C\n\nG1 E-2 F2400 ; retraction\n\nM84 E ; turn off E motor\n\nG29 P9 X10 Y-4 W32 H4\n\nM106 S100\n\nG0 Z40 F10000\n\nM190 S60 ; wait for bed temp\n\nM107\n\n;\n; MBL\n;\nM84 E ; turn off E motor\nG29 P1 ; invalidate mbl & probe print area\nG29 P1 X0 Y0 W50 H20 C ; probe near purge place\nG29 P3.2 ; interpolate mbl probes\nG29 P3.13 ; extrapolate mbl outside probe area\nG29 A ; activate mbl\n\n; prepare for purge\nM104 S230\nG0 X0 Y-4 Z15 F4800 ; move away and ready for the purge\nM109 S230\n\nG92 E0\nM569 S0 E ; set spreadcycle mode for extruder\n\n;\n; Extrude purge line\n;\nG92 E0 ; reset extruder position\nG1 E2 F2400 ; deretraction after the initial one before nozzle cleaning\nG0 E7 X15 Z0.2 F500 ; purge\nG0 X25 E4 F500 ; purge\nG0 X35 E4 F650 ; purge\nG0 X45 E4 F800 ; purge\nG0 X48 Z0.05 F8000 ; wipe, move close to the bed\nG0 X51 Z0.2 F8000 ; wipe, move quickly away from the bed\n\nG92 E0\nM221 S100 ; set flow to 100%
; temperature = 220
; threads = 16
; toolchange_gcode = 
; travel_speed = 300
; use_firmware_retraction = 0
; use_relative_e_distances = 1
; use_set_and_wait_bed = 0
; use_set_and_wait_extruder = 0
; use_volumetric_e = 0
; vibration_limit = 0
; wipe = 0
; z_offset = 0
; z_steps_per_mm = 0
; adaptive_slicing = 0
; adaptive_slicing_quality = 75%
; dont_support_bridges = 0
; extrusion_width = 0.45
; first_layer_height = 0.2
; infill_only_where_needed = 0
; interface_shells = 0
; layer_height = 0.2
; match_horizontal_surfaces = 0
; raft_layers = 0
; regions_overlap = 0
; seam_position = aligned
; sequential_print_priority = 0
; support_material = 1
; support_material_angle = 0
; support_material_buildplate_only = 0
; support_material_contact_distance = 0.2
; support_material_enforce_layers = 0
; support_material_extruder = 1
; support_material_extrusion_width = 0.36
; support_material_interface_extruder = 1
; support_material_interface_extrusion_width = 0
; support_material_interface_layers = 5
; support_material_interface_spacing = 0.2
; support_material_interface_speed = 50%
; support_material_max_layers = 0
; support_material_pattern = rectilinear
; support_material_spacing = 2
; support_material_speed = 120
; support_material_threshold = 40
; xy_size_compensation = 0
; bottom_infill_pattern = rectilinear
; bottom_solid_layers = 4
; bridge_flow_ratio = 1
; bridge_speed = 50
; external_perimeter_extrusion_width = 0.45
; external_perimeter_speed = 170
; external_perimeters_first = 0
; extra_perimeters = 0
; fill_angle = 45
; fill_density = 15%
; fill_gaps = 1
; fill_pattern = grid
; gap_fill_speed = 120
; infill_every_layers = 1
; infill_extruder = 1
; infill_extrusion_width = 0.45
; infill_overlap = 15%
; infill_speed = 200
; overhangs = 1
; perimeter_extruder = 1
; perimeter_extrusion_width = 0.45
; perimeter_speed = 170
; perimeters = 2
; small_perimeter_speed = 170
; solid_infill_below_area = 0
; solid_infill_every_layers = 0
; solid_infill_extruder = 1
; solid_infill_extrusion_width = 0.45
; solid_infill_speed = 200
; thin_walls = 0
; top_infill_extrusion_width = 0.42
; top_infill_pattern = rectilinear
; top_solid_infill_speed = 100
; top_solid_layers = 5
