# Aeroprint Project Resources

## Installation

Run this line to perform a full installation of this library and ROS2 Foxy.

``` bash
sudo curl -sSL https://github.com/kuederleR/aeroprint/raw/master/aeroprint_setup.sh | sh
```

If you do not have curl installed, run ```sudo apt install curl```.

## Running Pre-Release Applications

To install the pre-release version of the application, run this line in an Ubuntu terminal (working in 18, 20, 22).

``` bash
sudo snap install --devmode --edge aeroprint
```

If you do not have snap installed, run ```sudo apt install snap```.

Run ```aeroprint.base``` for the base code or ```aeroprint.starling``` to run the UAV code.

<p style="font-size:0.8rem">Note: the starling is not yet able to run snap due to file system incompatibility.</p>

## Aeroprint File Organization

```mermaid
graph TD;
    root(Root)---build(build \n\n Do not touch these files. \nThey are created by Colcon);
    root ---- install(install \n\n Install files for running packages\nAlso generated by Colcon);
    install --- lsu[local_setup.bash\n\n Source this script to\n extend env to include\n packages]:::file;
    root ---- log(log \n \nBuild log files);
    root ---- src(src\n\n Source files for the\n application)
    subgraph Root Files
        root --- setup[aeroprint_setup.sh\n\n Install ROS2 Foxy, etc.]:::file;
        root --- snapcraft[snapcraft.yaml\n\n Instructions for building snap app]:::file;
    end
    subgraph Source Files
        src --- host;
        src --- starling;
        src --- pkg
        subgraph Host
            host(host\n\n ros package for\n host computer)
        end
        subgraph Starling
            starling(starling\n\n ros package for\nstarling dev drone)
        end
        subgraph Other Source Files
            pkg[pkg name\n\n Other source code\n for data processing, \n 3D printing, etc.]
        end
    end

    classDef file fill:#5fa;   
```

## ROS Package Layout
Ros packages have a particular layout, which is automatically generated by [ROS2](https://docs.ros.org/en/foxy/How-To-Guides/Developing-a-ROS-2-Package.html#creating-a-package). For this project, we will be using ament_python for building our packages. This is specified when creating a ROS2 package. The packages, host and starling, have both been created using ROS2's pkg create feature, with the addition of a [launch](https://docs.ros.org/en/foxy/How-To-Guides/Launch-file-different-formats.html) folder.

Both the starling and host packages have approximately identical layouts. Below is a tree representing the layout of the host package. 
```mermaid
graph TD
    host(host\n\n the host ROS2 package);
    host --- host2(host\n\n Store the source for\n the ROS nodes. This\n is where most of our \ncode will be written);
    host --- launch(launch \n\n contains a ROS launch\n script to make running\n nodes simpler);
    host ---- resource(resource\n\n Do not edit. ROS\n creates a blank file\n to detect the package);
    host ---- test(test\n\n Test scripts for ROS)
    subgraph Host Files
        host --- package[package.xml\n\n This is where we put basic \n info and dependencies\n for the ROS package]:::file;
        host --- setup[setup.cfg\n\n Tells ROS where to\n find executables]:::file;
        host --- setup2[setup.py\n\n Configure package\n specifics and define\n executables for ROS]:::file;
    end

    classDef file fill:#5fa;
```
